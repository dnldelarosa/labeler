<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="labeler">
<title>Easy to use and share labels in R â€¢ labeler</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Easy to use and share labels in R">
<meta property="og:description" content="labeler">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">labeler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/labeler.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/adatar-do/labeler/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">
<script src="labeler_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="labeler_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="labeler_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="labeler_files/datatables-binding-0.20/datatables.js"></script><script src="labeler_files/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="labeler_files/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="labeler_files/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="labeler_files/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="labeler_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="labeler_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Easy to use and share labels in R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/adatar-do/labeler/blob/HEAD/vignettes/labeler.Rmd" class="external-link"><code>vignettes/labeler.Rmd</code></a></small>
      <div class="d-none name"><code>labeler.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="labelled-data-in-r">Labelled data in R<a class="anchor" aria-label="anchor" href="#labelled-data-in-r"></a>
</h2>
<p>Historically, software like SPSS, SAS or Stata have worked with labelled data. The closest function in R base corresponds to factors, which actually work in reverse, assigning values to text variables with few distinct values.</p>
<p>Being able to work with labelled data is one of the features that R users who come from the previously mentioned systems miss the most.</p>
<p>In the R ecosystem there are 3 fundamental packages for working with labelled data <code>haven</code>, <code>labelled</code> y <code>sjlabelled</code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;See &lt;a href="https://www.pipinghotdata.com/posts/2020-12-23-leveraging-labelled-data-in-r/" class="external-link uri"&gt;https://www.pipinghotdata.com/posts/2020-12-23-leveraging-labelled-data-in-r/&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>.</p>
<p>However, these packages work in a similar way. They all expect you to load previously labelled data or assign the labels manually for each of the variables.</p>
<p>If you work with a dozen variables, this scheme is possible. However, as the number of variables grows, this scheme becomes difficult to handle. It should even be noted that some operations in R remove most of the attributes on objects, so perhaps some labels may even have to be assigned repeatedly.</p>
<p>In this sense, <code>labeler</code> offers a new scheme to work with labelled data in R, which is based on:</p>
<ol style="list-style-type: decimal">
<li>The data does not need to be pre-labelled or manually labelled. For these purposes a dictionary, that may have been received with the data or built on the fly, is used.</li>
<li>The assignment of the labels is done at the end of the pipeline, and in a semi-automated way.</li>
</ol>
</div>
<div class="section level2">
<h2 id="the-dictionary">The dictionary<a class="anchor" aria-label="anchor" href="#the-dictionary"></a>
</h2>
<p>The <code>dictionary</code> object consists of a list that contains each of the variables to be labeled. The <code>variables</code> in turn, consist of lists that contain inside:</p>
<ol style="list-style-type: decimal">
<li>
<strong>lab</strong>: A character string that describes the variable.</li>
<li>
<strong>labs</strong>: A named vector of the possible values that the variable takes.</li>
</ol>
<p>In this sense, a valid dictionary in <code>labeler</code> can be built and is displayed as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  GENDER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    lab <span class="op">=</span> <span class="st">"Gender of the person"</span>,
    labs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Man"</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">"Woman"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
  <span class="op">)</span>,
  AGE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    lab <span class="op">=</span> <span class="st">"Age of the person"</span>
  <span class="op">)</span>,
  SEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    lab <span class="op">=</span> <span class="st">"link::GENDER"</span>,
    labs <span class="op">=</span> <span class="st">"link::GENDER"</span>
  <span class="op">)</span>,
  Married <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    lab <span class="op">=</span> <span class="st">"Indicates whether or not the person is married"</span>,
    labs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"No"</span> <span class="op">=</span> <span class="fl">0</span>, <span class="st">"Yes"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Following these basic criteria, you can create a custom dictionary, either by building it from scratch, or by adding the necessary labels for the variables that you create through your analysis.</p>
<div class="section level3">
<h3 id="parsing-the-dictionary">Parsing the dictionary<a class="anchor" aria-label="anchor" href="#parsing-the-dictionary"></a>
</h3>
<p>Working with non-ASCII characters in R is a tedious task. <code>labeler</code> offers a way to work with non-ASCII characters in dictionaries. For these purposes there is the <code><a href="../reference/parse_dict.html">parse_dict()</a></code> function that allows parsing a dictionary to replace these characters. Note that this process is necessary only if the dictionary is intended to be saved as a valid R object, as part of a package for example. The other functions in <code>labeler</code> are designed to reverse this automatic forming process.</p>
</div>
<div class="section level3">
<h3 id="browsing-the-dictionary">Browsing the dictionary<a class="anchor" aria-label="anchor" href="#browsing-the-dictionary"></a>
</h3>
<p>Using the <code><a href="../reference/browse_dict.html">browse_dict()</a></code> function, the user will be able to interactively consult the dictionary in order to become familiar with its content.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/browse_dict.html">browse_dict</a></span><span class="op">(</span><span class="va">dict</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-5da0942eedd39886f08a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5da0942eedd39886f08a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],["GENDER","AGE","SEX","Married"],["Gender of the person","Age of the person","Gender of the person","Indicates whether or not the person is married"],["<div>1: Man<br />2: Woman<br /><\/div>","<div><\/div>","<div>1: Man<br />2: Woman<br /><\/div>","<div>0: No<br />1: Yes<br /><\/div>"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>var<\/th>\n      <th>lab<\/th>\n      <th>labs<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"autoWidth":false,"columnDefs":[{"width":"40%","targets":[2,3]},{"targets":2,"className":"dt-top"},{"orderable":false,"targets":0}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="setting-the-labels">Setting the labels<a class="anchor" aria-label="anchor" href="#setting-the-labels"></a>
</h2>
<p>The function <code><a href="../reference/set_labels.html">set_labels ()</a></code>, has as main objective to take the labels of variables and values available in a dictionary and apply them to a data table or dataframe.</p>
<p>The following are basic examples of using this feature. For the sake of familiarity, we will call the data set <code>enft</code> which is the acronym for the National Survey of the Dominican Republic Workforce, hinting that the way in which the functions are used in these examples is the way in which the one you will use when working with these surveys.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">enft</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  GENDER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,
  AGE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">30</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,
  SEX <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,
  MARRIED <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Notice in the code below that just by applying the <code><a href="../reference/set_labels.html">set_labels ()</a></code> function our data now contains labels we can use in our analysis.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">enft</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    10 obs. of  4 variables:</span>
<span class="co">#&gt;  $ GENDER : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;  $ AGE    : num  1 4 7 10 13 16 19 22 25 28</span>
<span class="co">#&gt;  $ SEX    : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;  $ MARRIED: num  0 0 0 0 1 1 1 1 1 1</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/set_labels.html">set_labels</a></span><span class="op">(</span><span class="va">enft</span>, dict <span class="op">=</span> <span class="va">dict</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    10 obs. of  4 variables:</span>
<span class="co">#&gt;  $ GENDER : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Gender of the person"</span>
<span class="co">#&gt;   ..- attr(*, "labels")= Named num [1:2] 1 2</span>
<span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "Man" "Woman"</span>
<span class="co">#&gt;  $ AGE    : num  1 4 7 10 13 16 19 22 25 28</span>
<span class="co">#&gt;  $ SEX    : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Gender of the person"</span>
<span class="co">#&gt;   ..- attr(*, "labels")= Named num [1:2] 1 2</span>
<span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "Man" "Woman"</span>
<span class="co">#&gt;  $ MARRIED: num  0 0 0 0 1 1 1 1 1 1</span></code></pre></div>
<p>On the other hand, it is important to mention that as indicated in the description of the functionâ€™s arguments, it is possible to assign the data labels to specific variables.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/set_labels.html">set_labels</a></span><span class="op">(</span><span class="va">enft</span>, dict <span class="op">=</span> <span class="va">dict</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GENDER"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    10 obs. of  4 variables:</span>
<span class="co">#&gt;  $ GENDER : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Gender of the person"</span>
<span class="co">#&gt;   ..- attr(*, "labels")= Named num [1:2] 1 2</span>
<span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "Man" "Woman"</span>
<span class="co">#&gt;  $ AGE    : num  1 4 7 10 13 16 19 22 25 28</span>
<span class="co">#&gt;  $ SEX    : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;  $ MARRIED: num  0 0 0 0 1 1 1 1 1 1</span></code></pre></div>
<p>Compare this result with the previous one to notice that in this case the <code>GENDER</code> variable contains data labels, as indicated in the function call.</p>
<p>If you have paid enough attention to the output of the code, you will have noticed that the data labels have never been assigned to the <code>MARRIED</code> variable. This is so, because R is case-sensitive, which means that <code>MARRIED</code> as stated in the dataset is not the same as <code>Married</code> as stated in the dictionary. Fortunately, the <code>ignore_case</code> argument of the <code>set_labels</code> function is designed especially for this purpose. As shown below, using this argument you can make labels are assigned to this variable as well.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/set_labels.html">set_labels</a></span><span class="op">(</span><span class="va">enft</span>, dict <span class="op">=</span> <span class="va">dict</span>, ignore_case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    10 obs. of  4 variables:</span>
<span class="co">#&gt;  $ GENDER : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Gender of the person"</span>
<span class="co">#&gt;   ..- attr(*, "labels")= Named num [1:2] 1 2</span>
<span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "Man" "Woman"</span>
<span class="co">#&gt;  $ AGE    : num  1 4 7 10 13 16 19 22 25 28</span>
<span class="co">#&gt;  $ SEX    : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Gender of the person"</span>
<span class="co">#&gt;   ..- attr(*, "labels")= Named num [1:2] 1 2</span>
<span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "Man" "Woman"</span>
<span class="co">#&gt;  $ MARRIED: num  0 0 0 0 1 1 1 1 1 1</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Indicates whether or not the person is married"</span>
<span class="co">#&gt;   ..- attr(*, "labels")= Named num [1:2] 0 1</span>
<span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "No" "Yes"</span></code></pre></div>
<p>However, depending on the size and origin of your data set and dictionary, you should be cautious with this option, to avoid unexpected results. So it might be a good idea to use this argument when specifying target variables.</p>
<p>Another detail, which if you are a good observer you will have noticed, is the use of the wildcard <code>link::</code> in the definition of the labels of the <code>SEX</code> variable. In this case, as you will guess when you see the labels that are assigned to this last variable, what is achieved by using this wildcard is to reference the labels between one variable and another. This way, if you create a variable that uses exactly the same labels as another, it will be much easier to add the same to the dictionary. Of course, a more plausible option is to create your own custom dictionary of frequently created variables that you can reuse from analysis to analysis.</p>
<p>Also, if for some reason you want to overwrite some of the predefined tags in the dictionary, you just need to take into account the structure of the dictionary and make the required replacements. For example, if instead of <code>Man / Woman</code> you want to use the abbreviations of these words, you can get it with the code below.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dict</span><span class="op">[[</span><span class="st">"SEX"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">labs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">"W"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/set_labels.html">set_labels</a></span><span class="op">(</span><span class="va">enft</span>, dict <span class="op">=</span> <span class="va">dict</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    10 obs. of  4 variables:</span>
<span class="co">#&gt;  $ GENDER : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;  $ AGE    : num  1 4 7 10 13 16 19 22 25 28</span>
<span class="co">#&gt;  $ SEX    : num  1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Gender of the person"</span>
<span class="co">#&gt;   ..- attr(*, "labels")= Named num [1:2] 1 2</span>
<span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "M" "W"</span>
<span class="co">#&gt;  $ MARRIED: num  0 0 0 0 1 1 1 1 1 1</span></code></pre></div>
<p>##chec Using the labels</p>
<p>As you may have noticed in all the previous examples, we have used the <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code> function to show the changes in the data, resulting from the application of the labels. This is so, because even having assigned the labels, your data still looks exactly the same. At this point the <code><a href="../reference/use_labels.html">use_labels()</a></code> function comes into play, which allows us to substitute the values of a variable for the corresponding labels.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/use_labels.html">use_labels</a></span><span class="op">(</span><span class="va">enft</span>, dict <span class="op">=</span> <span class="va">dict</span>, ignore_case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt;    GENDER AGE SEX MARRIED</span>
<span class="co">#&gt; 1     Man   1   M      No</span>
<span class="co">#&gt; 2     Man   4   M      No</span>
<span class="co">#&gt; 3     Man   7   M      No</span>
<span class="co">#&gt; 4     Man  10   M      No</span>
<span class="co">#&gt; 5     Man  13   M     Yes</span>
<span class="co">#&gt; 6   Woman  16   W     Yes</span>
<span class="co">#&gt; 7   Woman  19   W     Yes</span>
<span class="co">#&gt; 8   Woman  22   W     Yes</span>
<span class="co">#&gt; 9   Woman  25   W     Yes</span>
<span class="co">#&gt; 10  Woman  28   W     Yes</span></code></pre></div>
<p>You can use the <code><a href="../reference/set_labels.html">set_labels()</a></code> function to assign the labels at a point in the pipeline, and the <code><a href="../reference/use_labels.html">use_labels()</a></code> function at a later stage to use them. Or you can, as shown below and the easiest way, pass the dictionary directly to the <code><a href="../reference/use_labels.html">use_labels()</a></code> function which will take care of calling the <code><a href="../reference/set_labels.html">set_labels()</a></code> function automatically. Anyway, a more convenient option is to assign / use the labels once a summary table of the data has been generated. What has the advantage of operating on a smaller number of variables.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">enft</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>
    gender <span class="op">=</span> <span class="va">GENDER</span>,
    united <span class="op">=</span> <span class="va">MARRIED</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/set_labels.html">set_labels</a></span><span class="op">(</span>dict <span class="op">=</span> <span class="va">dict</span>, ignore_case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/use_labels.html">use_labels</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 Ã— 3</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   gender, united [3]</span></span>
<span class="co">#&gt;   gender united     n</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Man         0     4</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Man         1     1</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Woman       1     5</span></code></pre></div>
<p>As can be seen in the previous example, even though the <code>GENDER</code> variable has been renamed, just by assigning the <code>ignore_case = TRUE</code> argument, the function was able to assign the data labels. While in the case of the variable <code>MARRIED</code> the name has been changed to one that is not present in the dictionary, so the function was not able to find the corresponding labels. This could have been achieved in the following way, for example:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">enft</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>
    gender <span class="op">=</span> <span class="va">GENDER</span>, 
    married <span class="op">=</span> <span class="va">MARRIED</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/use_labels.html">use_labels</a></span><span class="op">(</span>dict <span class="op">=</span> <span class="va">dict</span>, ignore_case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">"united"</span> <span class="op">=</span> <span class="st">"married"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 Ã— 3</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   gender, united [3]</span></span>
<span class="co">#&gt;   gender united     n</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Man    No         4</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Man    Yes        1</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Woman  Yes        5</span></code></pre></div>
<p>Furthermore, regardless of which variables have assigned labels, it is possible to specify which of them you want to use. This is possible using the <code>vars</code> argument. Note also that the arguments can be combined, arriving at the desired result.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">enft</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>
    gender <span class="op">=</span> <span class="va">GENDER</span>, 
    married <span class="op">=</span> <span class="va">MARRIED</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/use_labels.html">use_labels</a></span><span class="op">(</span>dict <span class="op">=</span> <span class="va">dict</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span>, ignore_case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">"united"</span> <span class="op">=</span> <span class="st">"married"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 Ã— 3</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   gender, united [3]</span></span>
<span class="co">#&gt;   gender united     n</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Man         0     4</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Man         1     1</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Woman       1     5</span></code></pre></div>
<p>When variables contain values that are not in the dictionary, <code><a href="../reference/use_labels.html">use_labels()</a></code> by <strong>default</strong> prevents labels from being assigned to these variables and prints a warning in the console indicating the variables that could not be labeled. You can assign the argument <code>use_labels(..., check = FALSE)</code> so that the labels are used regardless of those values that are not present in the dictionary, which will be converted to <code>NA</code>. In this sense, the best option is to add to the dictionary all the values that the variable has to take. If you just want to avoid the console warning, use the <code>vars</code> argument to specify the variables to be labelled, excluding the conflicting variables.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">enft</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>
    <span class="va">GENDER</span>, 
    SEX <span class="op">=</span> <span class="va">SEX</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/use_labels.html">use_labels</a></span><span class="op">(</span>dict <span class="op">=</span> <span class="va">dict</span><span class="op">)</span>
<span class="co">#&gt; Warning in use_labels(., dict = dict): The following (1) variables contain values</span>
<span class="co">#&gt;       that are not in the dictionary and were not labeled: </span>
<span class="co">#&gt; SEX.</span>
<span class="co">#&gt;       Please see "https://adatar-do.github.io/labeler/articles/labeler.html" for more details.</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 Ã— 3</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   GENDER, SEX [2]</span></span>
<span class="co">#&gt;   GENDER   SEX     n</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Man        2     5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Woman      3     5</span></code></pre></div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Daniel E. de la Rosa.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
